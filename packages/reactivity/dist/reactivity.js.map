{
  "version": 3,
  "sources": ["../../shared/src/index.ts", "../src/reactive.ts", "../src/effect.ts"],
  "sourcesContent": ["export const isObject = (value) => value !== null && typeof value === 'object'\n", "import { isObject } from '@vue/shared'\n\nexport const enum ReactiveFlags {\n  IS_REACTIVE = '__v_isReactive',\n}\n\nexport const mutableHandles = {\n  get(target, key, receiver) {\n    // \u89E3\u51B3\u60C5\u51B5\u4E00\n    if (!target[ReactiveFlags.IS_REACTIVE])\n      target[ReactiveFlags.IS_REACTIVE] = true\n\n    // \u89E3\u51B3\u60C5\u51B5\u4E09\n\n    if (isObject(target[key])) return reactive(target[key])\n\n    return Reflect.get(target, key, receiver)\n  },\n\n  set(target, key, value, receiver) {\n    return Reflect.set(target, key, value, receiver)\n  },\n}\n\nconst reactiveMap = new WeakMap()\nexport function reactive(target) {\n  // reactive\u53EA\u80FD\u5904\u7406\u5BF9\u8C61\u7C7B\u578B\u7684\u6570\u636E\n  if (!isObject(target)) return\n\n  // \u89E3\u51B3\u60C5\u51B5\u4E00 \u65E0\u9700\u91CD\u590D\u4EE3\u7406\n  const existsProxy = reactiveMap.get(target)\n  if (existsProxy) return existsProxy\n\n  // \u89E3\u51B3\u60C5\u51B5\u4E8C\n  if (target[ReactiveFlags.IS_REACTIVE]) return target\n\n  // \u521B\u5EFA\u4EE3\u7406\n  const proxy = new Proxy(target, mutableHandles)\n  // \u7F13\u5B58\u4EE3\u7406\u7ED3\u679C \u65E0\u9700\u91CD\u590D\u4EE3\u7406\n  reactiveMap.set(target, proxy)\n  return proxy\n}\n\n// \u60C5\u51B5\u4E00 obj\u5DF2\u7ECF\u88AB\u4EE3\u7406\u8FC7\u4E00\u6B21\u4E86\uFF0C\u4E0D\u9700\u8981\u518D\u6B21\u4EE3\u7406\uFF0C\u5426\u5219\u4F1A\u6D6A\u8D39\u6027\u80FD\n/*\nconst obj = {\n  name: 'zs',\n  age: 19\n}\nconst proxyObj1 = reactive(obj)\nconst proxyObj2 = reactive(obj)\n*/\n\n// \u60C5\u51B5\u4E8C \u4EE3\u7406 \u4EE3\u7406\u5BF9\u8C61\n/**\n * \u89E3\u51B3\u601D\u8DEF \u5229\u7528get \u7ED9\u5F53\u524D\u88AB\u4EE3\u7406\u5BF9\u8C61\u6DFB\u52A0\u4E00\u4E2A\u6807\u8BC6\u7B26 \u6807\u8BC6\u8BE5\u5BF9\u8C61\u5DF2\u7ECF\u88AB\u4EE3\u7406\u4E86\n * \u5177\u4F53\u505A\u6CD5\n * \u5F53\u4EE3\u7801\u8D70\u5230reactive\u51FD\u6570\u7684if (target[ReactiveFlags.IS_REACTIVE]) return target\u8FD9\u6BB5\u5176\u5B9E\u5C31\u4F1A\u89E6\u53D1get \uFF08target[ReactiveFlags.IS_REACTIVE]\u4E3B\u8981\u662F\u8FD9\u90E8\u5206\u89E6\u53D1\u7684get\uFF09 \u8FD9\u65F6\u5019\u7ED9\u539F\u5BF9\u8C61\u6DFB\u52A0\u6807\u8BC6\u7B26\u5373\u53EF  \u7B2C\u4E00\u6B21\u80AF\u5B9A\u4E0D\u5B58\u5728\u8FD9\u4E2A\u6807\u8BC6\u7B26 \u6240\u4EE5\u4F1A\u88AB\u4EE3\u7406\n *\n * \u90A3\u4E48\u5373\u4F7F\u518D\u4EE3\u7406\u8FD9\u4E2A\u4EE3\u7406\u5BF9\u8C61 \u5C31\u50CF\u4E0B\u9762proxyObj2\u4E00\u6837\uFF0C\u4E5F\u4E0D\u4F1A\u7EE7\u7EED\u4EE3\u7406 \u56E0\u4E3Atarget[ReactiveFlags.IS_REACTIVE]\u7684\u7ED3\u679C\u662Ftrue\n */\n\n/*\nconst obj = {\n  name: 'zs',\n  age: 19,\n}\nconst proxyObj1 = reactive(obj)\nconst proxyObj2 = reactive(proxyObj1)\n*/\n\n// \u60C5\u51B5\u4E09\n/*\n\u5982\u4E0B\u4EE3\u7801 info\u5E76\u4E0D\u662F\u4E00\u4E2A\u4EE3\u7406\u5BF9\u8C61\u90A3\u4E48\u5F53\u6570\u636E\u53D1\u751F\u53D8\u5316\u5C31\u4E0D\u4F1A\u81EA\u52A8\u66F4\u65B0 \n\u539F\u56E0\u662F Proxy\u53EA\u80FD\u6D45\u5C42\u7684\u4EE3\u7406\n\u89E3\u51B3\u65B9\u6848 \u4F7F\u7528\u9012\u5F52\u4EE3\u7406  \u5728get\u4E2D\u5224\u65ADkey\u662F\u5426\u662F\u5BF9\u8C61 \u5982\u679C\u662F\u5219\u7EE7\u7EED\u7528reactive\u4EE3\u7406\nconst obj = {\n  name: 'zs',\n  info: {\n    age: 19\n  }\n}\nconsole.log(obj.info)\n*/\n", "export function effect() {}\n"],
  "mappings": ";AAAO,IAAM,WAAW,CAAC,UAAU,UAAU,QAAQ,OAAO,UAAU;;;ACM/D,IAAM,iBAAiB;AAAA,EAC5B,IAAI,QAAQ,KAAK,UAAU;AAEzB,QAAI,CAAC,OAAO,kCAAyB;AACnC,aAAO,kCAAyB,IAAI;AAItC,QAAI,SAAS,OAAO,GAAG,CAAC;AAAG,aAAO,SAAS,OAAO,GAAG,CAAC;AAEtD,WAAO,QAAQ,IAAI,QAAQ,KAAK,QAAQ;AAAA,EAC1C;AAAA,EAEA,IAAI,QAAQ,KAAK,OAAO,UAAU;AAChC,WAAO,QAAQ,IAAI,QAAQ,KAAK,OAAO,QAAQ;AAAA,EACjD;AACF;AAEA,IAAM,cAAc,oBAAI,QAAQ;AACzB,SAAS,SAAS,QAAQ;AAE/B,MAAI,CAAC,SAAS,MAAM;AAAG;AAGvB,QAAM,cAAc,YAAY,IAAI,MAAM;AAC1C,MAAI;AAAa,WAAO;AAGxB,MAAI,OAAO,kCAAyB;AAAG,WAAO;AAG9C,QAAM,QAAQ,IAAI,MAAM,QAAQ,cAAc;AAE9C,cAAY,IAAI,QAAQ,KAAK;AAC7B,SAAO;AACT;;;ACzCO,SAAS,SAAS;AAAC;",
  "names": []
}
